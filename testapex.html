<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Brush charts</title>
    <link href="./assets/styles.css" rel="stylesheet" />
    <style>
    #wrapper {
      padding-top: 20px;
      padding-left: 10px;
      background: #fff;
      border: 1px solid #ddd;
      box-shadow: 0 22px 35px -16px rgba(0, 0, 0, 0.1);
      max-width: 100%;
      margin: 35px auto;
    }
    
    #chart-line {
      position: relative;
      margin-top: -40px;
    }
    </style>

    <script>
      window.Promise ||
      document.write(
              '<script src="https://cdn.jsdelivr.net/npm/promise-polyfill@8/dist/polyfill.min.js"><\/script>'
      )
      window.Promise ||
      document.write(
              '<script src="https://cdn.jsdelivr.net/npm/eligrey-classlist-js-polyfill@1.2.20171210/classList.min.js"><\/script>'
      )
      window.Promise ||
      document.write(
              '<script src="https://cdn.jsdelivr.net/npm/findindex_polyfill_mdn"><\/script>'
      )
    </script>


    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script>
      /*
       * Data diisi dengan isian sebagai berikut
       * {station: 0, timedata: 12:00}
       * {station: 0, timedata: 12:30}
       * {station: 1, timedata: 13:00}
       * {station: 1, timedata: 13:15}
       * {station: 2, timedata: 14:15}
       * {station: 2, timedata: 14:45}
       * {station: 3, timedata: 16:00}
       * {station: 3, timedata: 17:00}
       */
      date12 = new Date();
      date12.setHours(12);
      date12.setMinutes(0);
      dateNum = date12.getTime();
      dateNumAwal = dateNum;

      var data = [];
      data.push([dateNum, 0]);
      date12 = new Date();
      date12.setHours(12);
      date12.setMinutes(30);
      dateNum = date12.getTime();
      data.push([dateNum, 0]);

      date12 = new Date();
      date12.setHours(14);
      date12.setMinutes(0);
      dateNum = date12.getTime();
      data.push([dateNum, 1]);
      date12 = new Date();
      date12.setHours(14);
      date12.setMinutes(30);
      dateNum = date12.getTime();
      data.push([dateNum, 1]);

      date12 = new Date();
      date12.setHours(16);
      date12.setMinutes(0);
      dateNum = date12.getTime();
      data.push([dateNum, 2]);
      date12 = new Date();
      date12.setHours(16);
      date12.setMinutes(30);
      dateNum = date12.getTime();
      data.push([dateNum, 2]);

      date12 = new Date();
      date12.setHours(18);
      date12.setMinutes(0);
      dateNum = date12.getTime();
      data.push([dateNum, 3]);
      date12 = new Date();
      date12.setHours(18);
      date12.setMinutes(30);
      dateNum = date12.getTime();
      data.push([dateNum, 3]);

      date12 = new Date();
      date12.setHours(20);
      date12.setMinutes(0);
      dateNum = date12.getTime();
      data.push([dateNum, 4]);
      date12 = new Date();
      date12.setHours(20);
      date12.setMinutes(30);
      dateNum = date12.getTime();
      data.push([dateNum, 4]);

      var data2 = [];
      date2 = new Date();
      date2.setHours(12);
      date2.setMinutes(0);
      data2.push([date2, 1]);
      date2 = new Date();
      date2.setHours(12);
      date2.setMinutes(30);
      data2.push([date2, 1]);

      date2 = new Date();
      date2.setHours(14);
      date2.setMinutes(0);
      data2.push([date2, 2]);
      date2 = new Date();
      date2.setHours(14);
      date2.setMinutes(30);
      data2.push([date2, 2]);

      date2 = new Date();
      date2.setHours(16);
      date2.setMinutes(0);
      data2.push([date2, 4]);
      date2 = new Date();
      date2.setHours(16);
      date2.setMinutes(30);
      data2.push([date2, 4]);

      date2 = new Date();
      date2.setHours(18);
      date2.setMinutes(0)
      data2.push([date2, 3]);
      date2 = new Date();
      date2.setHours(18);
      date2.setMinutes(30);
      data2.push([date2, 3]);

      date2 = new Date();
      date2.setHours(20);
      date2.setMinutes(0)
      data2.push([date2, 2]);
      date2 = new Date();
      date2.setHours(20);
      date2.setMinutes(30);
      data2.push([date2, 2]);

      dateNumAkhir = dateNum;
      console.log(data);
      dateMin = new Date();
      dateMin.setHours(0);
      dateMin.setMinutes(0);
      dateMin.setSeconds(0);
      console.log(dateMin);
      dateMax = new Date();
      dateMax.setHours(23);
      dateMax.setMinutes(59);
      dateMax.setSeconds(59);
      console.log(dateMax);
    </script>
  </head>
  <body>
  <div id="wrapper">
    <div id="chart-line2"></div>
    <div id="chart-line"></div>
  </div>

  <script>
    var options = {
      series: [{
        name: "150",
        data: data
      },
        {
          name: "111",
          data: data2
        }
      ],
      chart: {
        id: 'chart2',
        type: 'line',
        height: 230,
        toolbar: {
          autoSelected: 'pan',
          show: false
        }
      },
      colors: ['#2E93fA', '#66DA26', '#546E7A', '#E91E63', '#FF9800'],
      stroke: {
        width: 3
      },
      dataLabels: {
        enabled: false
      },
      fill: {
        opacity: 1,
      },
      markers: {
        size: 0
      },
      xaxis: {
        type: 'datetime',
        labels: {
          format: 'HH:mm'
        }
      },
      yaxis: {
        labels: {
          formatter: function (value) {
            if (value == 0) {
              return "STA 1";
            } else if (parseInt(value) == 1) {
              return "STA 2";
            } else if (parseInt(value) == 2) {
              return "STA 3";
            } else if (parseInt(value) == 3) {
              return "STA 4";
            } else if (parseInt(value) == 4) {
              return "STA 5";
            }
            return "";
          },
          minWidth: 30,
        },
        showForNullSeries: false,
        tickAmount: 4
      },
      tooltip: {
        x: {
          format: 'HH:mm'
        }
      }
    };

    var chart = new ApexCharts(document.querySelector("#chart-line2"), options);
    chart.render();

    var optionsLine = {
      series: [{
        data: data
      },
        {
          data: data2
        }
      ],
      chart: {
        id: 'chart1',
        height: 130,
        type: 'line',
        brush:{
          target: 'chart2',
          enabled: true
        },
        selection: {
          enabled: true,
          xaxis: {
            min: dateNumAwal,
            max: dateNumAkhir
          }
        },
      },
      colors: ['#2E93fA', '#66DA26', '#546E7A', '#E91E63', '#FF9800'],
      // fill: {
      //   type: 'gradient',
      //   gradient: {
      //     opacityFrom: 0.91,
      //     opacityTo: 0.1,
      //   }
      // },
      xaxis: {
        type: 'datetime',
        tooltip: {
          enabled: false
        },
        labels: {
          format: 'HH:mm'
        }
      },
      yaxis: {
        tickAmount: 4,
        labels: {
          formatter: function (value) {
            if (value == 0) {
              return "STA 1";
            } else if (parseInt(value) == 1) {
              return "STA 2";
            } else if (parseInt(value) == 2) {
              return "STA 3";
            } else if (parseInt(value) == 3) {
              return "STA 4";
            } else if (parseInt(value) == 4) {
              return "STA 5";
            }
            return "";
          }
        }
      }
    };

    var chartLine = new ApexCharts(document.querySelector("#chart-line"), optionsLine);
    chartLine.render();
  </script>
  </body>
</html>
